# Telegram бот для записи на экзамен по математике

Бот для записи студентов на экзамены по математике (ОГЭ, ЕГЭ Проф, ЕГЭ База) с автоматическим сохранением данных в Google Sheets и системой напоминаний.

## Функционал

- Диалоговая система записи с выбором:
  - Типа экзамена (ОГЭ, ЕГЭ Проф, ЕГЭ База)
  - Дня недели (Суббота, Воскресенье)
  - Времени (зависит от выбранного дня)
  - Преподавателя (Анастасия, Василина)
  - Имени и фамилии
- Автоматическое сохранение данных в Google Sheets
- Система напоминаний:
  - За час до экзамена
  - За 15 минут до экзамена

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе `.env.example` и заполните необходимые переменные:
```bash
cp .env.example .env
```

4. Настройте Google Sheets API:
   - Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
   - Создайте новый проект или выберите существующий
   - Включите Google Sheets API и Google Drive API
   - Создайте Service Account:
     - Перейдите в "IAM & Admin" → "Service Accounts"
     - Создайте новый Service Account
     - Скачайте JSON файл с ключами и сохраните как `credentials.json` в корне проекта
   - Откройте вашу Google таблицу и предоставьте доступ Service Account (скопируйте email из credentials.json)

5. Получите токен Telegram бота:
   - Найдите [@BotFather](https://t.me/BotFather) в Telegram
   - Отправьте команду `/newbot` и следуйте инструкциям
   - Скопируйте полученный токен в `.env`

6. Настройте Google таблицу:
   - Создайте новую Google таблицу
   - Скопируйте ID таблицы из URL (между `/d/` и `/edit`)
   - Вставьте ID в `.env` как `GOOGLE_SHEET_ID`
   - Бот автоматически создаст лист "Записи" с необходимыми колонками

## Запуск

```bash
python bot.py
```

## Использование

1. Найдите вашего бота в Telegram
2. Отправьте команду `/start`
3. Следуйте инструкциям бота для записи на экзамен
4. После завершения регистрации вы получите ссылку на бланки

## Структура проекта

- `bot.py` - основной файл бота с логикой диалога
- `sheets.py` - модуль для работы с Google Sheets
- `scheduler.py` - модуль для управления напоминаниями
- `requirements.txt` - зависимости проекта
- `.env` - файл с переменными окружения (не включен в репозиторий)
- `credentials.json` - учетные данные Google Service Account (не включен в репозиторий)

## Переменные окружения

- `TELEGRAM_BOT_TOKEN` - токен Telegram бота
- `GOOGLE_SHEET_ID` - ID Google таблицы
- `GOOGLE_CREDENTIALS_PATH` - путь к файлу с учетными данными (по умолчанию `credentials.json`)
- `FORMS_LINK` - ссылка на бланки для заполнения

## Примечания

- Бот использует московское время (Europe/Moscow) для всех операций с датами и временем
- Напоминания загружаются из Google Sheets при каждом запуске бота
- Данные сохраняются в Google Sheets в реальном времени
